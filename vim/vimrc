syntax on

set re=1
set nocompatible                 " Disable the compatible for vi
set showcmd                      " Show (partial) command in status line.
set showmatch                    " Show matching brackets.
set smartcase                    " Do smart case matching
set incsearch                    " Incremental search
set cursorline                   " show a underline at current line
set nu
set nowrap                       " disable new line
set noswapfile                   " do not generate .swp file
set cursorcolumn
set ruler
set hls
set scrolloff=3
set matchtime=1
set laststatus=2
set magic
set t_Co=256                     " use 256 color in vim
set background=dark
set shell=bash
set backspace=start
set statusline=%<%f\ %h%m%r%=%k[%{(&fenc==\"\")?&enc:&fenc}%{(&bomb?\",BOM\":\"\")}]\ %-14.(%l,%c%V%)\ %P
set foldmethod=marker            " zf% mark pair () [] {}
set colorcolumn=81
set tabstop=8                    " tab stop at 8 space
set list listchars=tab:..,trail:^,extends:>,precedes:<
set mouse=
" set spell spelllang=en_us

" Highlights
highlight Pmenu ctermbg=238 ctermfg=255
highlight PmenuSel ctermbg=33 ctermfg=0
highlight PmenuSbar ctermbg=240
highlight PmenuThumb ctermbg=248

highlight SpecialKey ctermbg=none ctermfg=164
highlight NonText ctermbg=none ctermfg=164
highlight ExtraWhitespace ctermbg=94 ctermfg=none
highlight Visual ctermbg=54 ctermfg=gray

highlight CursorLine ctermfg=none ctermbg=none
highlight CursorColumn ctermbg=62 ctermfg=none
highlight ColorColumn ctermfg=none ctermbg=236

" Auto jump to the line when last exiting file
autocmd BufReadPost *
   \ if line("'\"") > 0 && line("'\"") <= line("$") |
   \     exe "normal g'\"" |
   \ endif

" Plug List
" 1. User below command to install plug manager
"    curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
" 2. In vim, type :PlugInstall for the installation.
call plug#begin()
    Plug 'vim-airline/vim-airline'
    Plug 'vim-airline/vim-airline-themes'
    Plug 'easymotion/vim-easymotion'
    Plug 'preservim/tagbar'
    Plug 'airblade/vim-gitgutter'
    Plug 'Yggdroot/LeaderF', { 'do': './install.sh' }
    Plug 'kaicataldo/material.vim', { 'branch': 'main' }
    Plug 'bluz71/vim-moonfly-colors'
    Plug 'tomasr/molokai'
    Plug 'liuchengxu/space-vim-dark'
    Plug 'octol/vim-cpp-enhanced-highlight'
    Plug 'bfrg/vim-cpp-modern'
call plug#end()

" Plug Configurations
nmap ss <Plug>(easymotion-s2)
nmap sn <Plug>(easymotion-sn)
let g:airline#extensions#tabline#enabled = 1
let g:airline_enabled = 1
let g:airline_theme = 'supernova'

inoremap <expr> <Tab> pumvisible() ? "\<C-n>" : "\<Tab>"
inoremap <expr> <S-Tab> pumvisible() ? "\<C-p>" : "\<S-Tab>"

let g:Lf_FuzzyMatch = 1
let g:Lf_DefaultMode = 'FullPath'

let mapleader = '\'

nnoremap <silent> <leader>f :LeaderfFile<CR>
nnoremap <silent> <leader>b :LeaderfBuffer<CR>
nnoremap <silent> <leader>t :LeaderfTag<CR>
nnoremap <silent> <leader>l :LeaderfLine<CR>

inoremap <silent><expr> <CR> pumvisible() ? coc#_select_confirm() : "\<CR>"

colorscheme space-vim-dark
set termguicolors

let b:current_syntax = "cpp.c"

hi Normal guibg=#000000 ctermbg=0
hi NonText guibg=#000000 ctermbg=0
hi EndOfBuffer guibg=#000000 ctermbg=0
hi SignColumn guibg=#000000 ctermbg=0
hi FoldColumn guibg=#000000 ctermbg=0
hi LineNr guibg=#000000 ctermbg=0
hi CursorLineNr guibg=#000000 ctermbg=0

autocmd VimEnter * call timer_start(200, {-> SetCustomizedHighlight()})
autocmd FileType cpp call timer_start(100, {-> SetCustomizedHighlight()})

function! SetCustomizedHighlight()
  " Pointer
  syntax match Pointer "\*\{1,3\}\s\?\w\+"
  syntax match Pointer "&\{1,3\}\s\?\w\+"
  syntax match Pointer "&[(]\?\w\+"
  syntax match Pointer "->\w\+"
  syntax match Pointer "\.\w\+"
  hi Pointer guifg=#9932CC ctermfg=170 gui=bold cterm=bold

  " Operator
  syntax match Operator " [?:+=\-\*/&|~%^] "
  syntax match Operator " [<>!] "
  syntax match Operator " [<>!]= "
  syntax match Operator " [+=\-\*/&|~]="
  syntax match Operator " \(&&\|||\) "
  syntax match Operator " \(&&\|||\)$"
  syntax match Operator "!"
  syntax match Operator "++"
  syntax match Operator " >>=\? "
  syntax match Operator " <<=\? "
  syntax match Operator " &&=\? "
  syntax match Operator "--"
  hi Operator guifg=#FF0000 ctermfg=196 gui=bold cterm=bold

  " Keyword Baisc
  syntax keyword Keyword_basic break case const continue default do else
  syntax keyword Keyword_basic extern for goto if register restrict
  syntax keyword Keyword_basic return sizeof static switch typedef
  syntax keyword Keyword_basic volatile while auto void
  hi Keyword_basic guifg=#00ff00 ctermfg=10 gui=NONE cterm=NONE

  " Keyword Advanced
  syntax keyword Keyword_advanced template typename struct enum
  syntax keyword Keyword_advanced class requires
  hi Keyword_advanced guifg=#DA70D6 ctermfg=170 gui=NONE cterm=NONE

  " Types
  syntax keyword Types_builtin int char short vector set span optional
  syntax keyword Types_builtin unsigned bool nullptr
  syntax keyword Types_builtin uint8_t uint16_t uint32_t uint64_t
  syntax keyword Types_builtin int8_t int16_t int32_t int64_t
  hi Types_builtin guifg=#FFFF00 ctermfg=226 gui=bold cterm=bold

  " MISC
  hi String guifg=#D2691E ctermfg=166 gui=bold cterm=bold
  hi Function guifg=#00bfff ctermfg=39
  hi Comment ctermfg=244 guifg=#808080 gui=NONE cterm=NONE

  " Template
  syntax match Operator "<"
  syntax match Operator ">"
  hi Operator guifg=#FFA500 ctermfg=214 gui=bold cterm=bold
endfunction
